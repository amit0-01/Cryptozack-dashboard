"use strict";(self.webpackChunkmaterial_pro_angular_lite=self.webpackChunkmaterial_pro_angular_lite||[]).push([[726],{6726:(dt,b,l)=>{l.r(b),l.d(b,{PublishStrategyModule:()=>gt});var p=l(4755),f=l(2480),P=l(5861),m=l(3276),S=l(1634),t=l(2223),h=l(6081),u=l(3144),g=l(4004),d=l(2548);let x=(()=>{class i{constructor(e){this.http=e}publish(e){const n=new u.WM({Authorization:`Bearer ${e.token}`}),o=(new u.LE).set("page",e.page).set("limit",e.limit).set("access",e.access);return this.http.get(`${d.ij.LIVE_URL}/algo-strategy/list-publish-strategy-request`,{headers:n,params:o}).pipe((0,g.U)(c=>c))}publishAccess(e){const n=`${d.ij.LIVE_URL}/algo-strategy/publish-strategy-access`,o=new u.WM({Authorization:`Bearer ${e.token}`});return this.http.post(n,{id:e.userId,access:e.access},{headers:o}).pipe((0,g.U)(c=>c.data))}publishaccessList(e){const n=`${d.ij.LIVE_URL}/algo-strategy/list-publish-strategy-request`,o=new u.WM({Authorization:`Bearer ${e.token}`}),r=(new u.LE).set("page",e.page).set("limit",e.limit).set("access",e.access);return this.http.get(n,{headers:o,params:r}).pipe((0,g.U)(c=>c))}unpublish(e){const n=`${d.ij.LIVE_URL}/algo-strategy/publish-strategy-access`,o=new u.WM({Authorization:`Bearer ${e.token}`});return this.http.post(n,{id:e.userId,access:e.access},{headers:o}).pipe((0,g.U)(c=>c.data))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(u.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var s=l(3627);function Z(i,a){1&i&&(t.TgZ(0,"div",18),t._UZ(1,"ngx-ui-loader",19),t.qZA()),2&i&&(t.xp6(1),t.Q6J("hasProgressBar",!1))}function v(i,a){1&i&&(t.TgZ(0,"th",20),t._uU(1,"Name"),t.qZA())}function w(i,a){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.user.firstName," ")}}function L(i,a){1&i&&(t.TgZ(0,"th",20),t._uU(1,"Email"),t.qZA())}function D(i,a){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.user.email," ")}}function A(i,a){1&i&&(t.TgZ(0,"th",20),t._uU(1,"Time"),t.qZA())}function N(i,a){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMMM dd, y , hh:mm:ss a")," ")}}function U(i,a){1&i&&(t.TgZ(0,"th",20),t._uU(1,"Status"),t.qZA())}const k=function(){return{color:"green"}};function Y(i,a){if(1&i&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("ngStyle",t.DdM(2,k)),t.xp6(1),t.hij(" ","ACCEPTED"===e.access?"ACCESS":"NOT ACCESS"," ")}}function M(i,a){1&i&&t._UZ(0,"tr",23)}function Q(i,a){1&i&&t._UZ(0,"tr",24)}function J(i,a){1&i&&(t.TgZ(0,"tr",25)(1,"td",26),t._uU(2,"No data Found "),t.qZA()())}const I=function(){return[15,25,50,75,100]};let O=(()=>{class i{constructor(e,n,o){this.activatedRoute=e,this.ngxService=n,this.publishService=o,this.displayColumns=["name","email","time","status"],this.dataSource=[],this.showLoader=!1;let r=localStorage.getItem("userinfo");r&&(this.parseData=JSON.parse(r))}ngOnInit(){this.initializeFilter(),this.show_List()}initializeFilter(){this.filter={token:this.parseData.token,page:1,limit:15,access:"ACCEPTED"}}show_List(){this.publishService.publishaccessList(this.filter).subscribe(e=>{this.showLoader=!0,this.ngxService.start(),this.dataSource=e.data.results,this.totalLength=e.data.count,this.showLoader=!1},e=>{this.showLoader=!1})}pageChange(e){this.filter.page=e.pageIndex+1,this.filter.limit=e.pageSize,this.show_List()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.gz),t.Y36(h.LA),t.Y36(x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-publish-strategy-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(m.NW,7),2&e){let o;t.iGM(o=t.CRH())&&(n.paginator=o.first)}},decls:24,vars:8,consts:[["class","ngxLoader",4,"ngIf"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"heading"],[1,"spacer"],[1,"table_container",2,"margin-top","10px"],["mat-table","",1,"dataTable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","time"],["matColumnDef","status"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","cursor-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["pageSize","15",1,"pagination",3,"length","pageSizeOptions","page"],[1,"ngxLoader"],[3,"hasProgressBar"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"ngStyle"],["mat-header-row",""],["mat-row","",1,"cursor-pointer"],[1,"mat-row"],["colspan","2",1,"pad-16",2,"text-align","center"]],template:function(e,n){1&e&&(t.YNc(0,Z,2,1,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4,"Published Strategy List"),t.qZA(),t._UZ(5,"div",4),t.qZA(),t.TgZ(6,"div",5)(7,"table",6),t.ynx(8,7),t.YNc(9,v,2,0,"th",8),t.YNc(10,w,2,1,"td",9),t.BQk(),t.ynx(11,10),t.YNc(12,L,2,0,"th",8),t.YNc(13,D,2,1,"td",9),t.BQk(),t.ynx(14,11),t.YNc(15,A,2,0,"th",8),t.YNc(16,N,3,4,"td",9),t.BQk(),t.ynx(17,12),t.YNc(18,U,2,0,"th",8),t.YNc(19,Y,2,3,"td",13),t.BQk(),t.YNc(20,M,1,0,"tr",14),t.YNc(21,Q,1,0,"tr",15),t.YNc(22,J,3,0,"tr",16),t.qZA(),t.TgZ(23,"mat-paginator",17),t.NdJ("page",function(r){return n.pageChange(r)}),t.qZA()()()),2&e&&(t.Q6J("ngIf",n.showLoader),t.xp6(7),t.Q6J("dataSource",n.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumns),t.xp6(2),t.Q6J("length",n.totalLength)("pageSizeOptions",t.DdM(7,I)))},dependencies:[p.O5,p.PC,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,m.NW,h.Eo,p.uU],styles:[".main_container[_ngcontent-%COMP%]{padding:0 10px;margin-bottom:10px}"]}),i})();var _=l(5580),y=l(430),C=l(3649),T=l(9383);function B(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",6),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.AsE("",e.key,": ",e.value,"")}}function E(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,B,3,2,"ng-container",5),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","autoMode"!==e.key)}}let R=(()=>{class i{constructor(e,n){this.dialogRef=e,this.values=n,this.displayedColumns=["buyThreshold","initialInvestment","lotMultiplier","maxPositions","profitThreshold"],this.keyValuePairs=[]}ngOnInit(){this.iterateObject(this.values.strategy.parameters)}iterateObject(e){for(var n in e)"object"==typeof e[n]&&null!=e[n]?this.iterateObject(e[n]):this.keyValuePairs.push({key:n,value:e[n]})}close(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.so),t.Y36(_.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-strategy-details"]],decls:9,vars:1,consts:[[1,"toolbar"],[2,"text-transform","capitalize"],[1,"spacer"],["matTooltip","Close",1,"pointer",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"key-value-pair"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-toolbar",0)(2,"span",1),t._uU(3,"Strategy Details"),t.qZA(),t._UZ(4,"div",2),t.TgZ(5,"mat-icon",3),t.NdJ("click",function(){return n.close()}),t._uU(6,"close"),t.qZA()()(),t.ynx(7),t.YNc(8,E,2,1,"div",4),t.BQk()),2&e&&(t.xp6(8),t.Q6J("ngForOf",n.keyValuePairs))},dependencies:[p.sg,p.O5,y.Hw,C.gM,T.Ye],styles:[".key-value-pair[_ngcontent-%COMP%]{padding:10px;margin-bottom:2px;border-radius:5px;box-shadow:0 2px 4px #0000001a;background:whitesmoke;white-space:normal;word-wrap:break-word}.toolbar[_ngcontent-%COMP%]{background-color:#1e88e5;color:#fff;position:sticky;top:0}"]}),i})();function q(i,a){1&i&&(t.TgZ(0,"div",23),t._UZ(1,"ngx-ui-loader",24),t.qZA()),2&i&&(t.xp6(1),t.Q6J("hasProgressBar",!1))}function z(i,a){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Name "),t.qZA())}function j(i,a){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.AsE(" ",e.user.firstName," ",e.user.lastName," ")}}function $(i,a){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Email"),t.qZA())}function F(i,a){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.user.email," ")}}function H(i,a){1&i&&(t.TgZ(0,"th",25),t._uU(1,"ROI"),t.qZA())}function G(i,a){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.strategy.roi," ")}}function V(i,a){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Profit"),t.qZA())}function W(i,a){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.strategy.totalProfit," ")}}function X(i,a){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Date & Time "),t.qZA())}function K(i,a){if(1&i&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMMM dd, y , hh:mm:ss a")," ")}}function tt(i,a){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Status "),t.qZA())}function et(i,a){1&i&&(t.TgZ(0,"span",29),t._uU(1,"PENDING"),t.qZA())}function it(i,a){if(1&i&&(t.TgZ(0,"td",27),t.YNc(1,et,2,0,"span",28),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","PENDING"==e.access)}}function at(i,a){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Action"),t.qZA())}const nt=function(){return{color:"green"}},ot=function(){return{color:"red"}};function st(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",27)(1,"mat-icon",30),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.strategyDetails(r))}),t._uU(2," info "),t.qZA(),t.TgZ(3,"mat-icon",31),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.publish(r))}),t._uU(4," check_circle_outline "),t.qZA(),t.TgZ(5,"mat-icon",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.unpublish(r))}),t._uU(6," cancel "),t.qZA()()}2&i&&(t.xp6(3),t.Q6J("ngStyle",t.DdM(2,nt)),t.xp6(2),t.Q6J("ngStyle",t.DdM(3,ot)))}function rt(i,a){1&i&&t._UZ(0,"tr",33)}function lt(i,a){1&i&&t._UZ(0,"tr",34)}function ct(i,a){1&i&&(t.TgZ(0,"tr",35)(1,"td",36),t._uU(2,"No data matching the filter "),t.qZA()())}const pt=function(){return[15,25,50,75,100]},ut=[{path:"",component:(()=>{class i{constructor(e,n,o){this.PublishService=e,this.ngxService=n,this.matDialog=o,this.displayedColumns=["name","email","time","roi","profit","status","action"],this.dataSource=[],this.showLoader=!1;let r=localStorage.getItem("userinfo");r&&(this.parseData=JSON.parse(r))}ngOnInit(){this.initializeFilter(),this.publishStrategyList()}initializeFilter(){this.filter={token:this.parseData.token,page:1,limit:15,access:"PENDING"}}publishStrategyList(){var e=this;return(0,P.Z)(function*(){e.showLoader=!0,e.ngxService.start();try{const n=yield e.PublishService.publish(e.filter).toPromise();e.totalLength=n.data.count,e.dataSource=n.data.results,e.showLoader=!1}catch{e.showLoader=!1}})()}pageChange(e){this.filter.page=e.pageIndex+1,this.filter.limit=e.pageSize,this.publishStrategyList()}publish(e){this.matDialog.open(S.w,{width:"300px",maxHeight:"400px"}).afterClosed().subscribe(n=>{1==n&&this._publish(e)})}_publish(e){this.showLoader=!0,this.ngxService.start(),this.PublishService.publishAccess({token:this.parseData.token,userId:e.id,access:"ACCEPTED"}).subscribe(o=>{o&&(this.initializeFilter(),this.publishStrategyList())},o=>{this.showLoader=!1,this.ngxService.stop()})}unpublish(e){this.matDialog.open(S.w,{width:"300px",maxHeight:"400px"}).afterClosed().subscribe(n=>{1==n&&this._unpublish(e)})}_unpublish(e){this.showLoader=!0,this.ngxService.start(),this.PublishService.unpublish({token:this.parseData.token,userId:e.id,access:"REJECTED"}).subscribe(o=>{o&&(this.initializeFilter(),this.publishStrategyList()),this.showLoader=!1,this.ngxService.stop()},o=>{this.showLoader=!1})}showList(){this.matDialog.open(O,{width:"800px",maxHeight:"600px"})}strategyDetails(e){this.matDialog.open(R,{width:"500px",maxHeight:"500px",data:e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x),t.Y36(h.LA),t.Y36(_.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-publish-strategy"]],viewQuery:function(e,n){if(1&e&&t.Gf(m.NW,7),2&e){let o;t.iGM(o=t.CRH())&&(n.paginator=o.first)}},decls:37,vars:7,consts:[["class","ngxLoader",4,"ngIf"],[1,"main_container"],[1,"flex","pad-8","header"],[1,"heading"],[1,"spacer"],[1,"mt-30"],["mat-button","",1,"show_List",3,"click"],[2,"margin-top","10px"],["mat-table","",1,"dataTable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","capital",4,"matCellDef"],["matColumnDef","email"],["mat-cell","",4,"matCellDef"],["matColumnDef","roi"],["matColumnDef","profit"],["matColumnDef","time"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["pageSize","15",1,"pagination",3,"length","pageSizeOptions","page"],[1,"ngxLoader"],[3,"hasProgressBar"],["mat-header-cell",""],["mat-cell","",1,"capital"],["mat-cell",""],["style","color: #f5bb8c;",4,"ngIf"],[2,"color","#f5bb8c"],["matTooltip","View Strategy Details","aria-label","View Strategy Details",1,"pointer","icon",3,"click"],["matTooltip","Give Access",1,"pointer","icon",3,"ngStyle","click"],["matTooltip","Cancel",1,"pointer","icon",3,"ngStyle","click"],["mat-header-row",""],["mat-row","",1,"cursor-pointer"],[1,"mat-row"],["colspan","5",1,"pad-16",2,"text-align","center"]],template:function(e,n){1&e&&(t.YNc(0,q,2,1,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4,"Strategy Requests For Publish "),t.qZA(),t._UZ(5,"div",4),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return n.showList()}),t.TgZ(8,"span"),t._uU(9,"Published Strategy List"),t.qZA()()()(),t.TgZ(10,"div",7)(11,"table",8),t.ynx(12,9),t.YNc(13,z,2,0,"th",10),t.YNc(14,j,2,2,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,$,2,0,"th",10),t.YNc(17,F,2,1,"td",13),t.BQk(),t.ynx(18,14),t.YNc(19,H,2,0,"th",10),t.YNc(20,G,2,1,"td",13),t.BQk(),t.ynx(21,15),t.YNc(22,V,2,0,"th",10),t.YNc(23,W,2,1,"td",13),t.BQk(),t.ynx(24,16),t.YNc(25,X,2,0,"th",10),t.YNc(26,K,3,4,"td",13),t.BQk(),t.ynx(27,17),t.YNc(28,tt,2,0,"th",10),t.YNc(29,it,2,1,"td",13),t.BQk(),t.ynx(30,18),t.YNc(31,at,2,0,"th",10),t.YNc(32,st,7,4,"td",13),t.BQk(),t.YNc(33,rt,1,0,"tr",19),t.YNc(34,lt,1,0,"tr",20),t.YNc(35,ct,3,0,"tr",21),t.qZA(),t.TgZ(36,"mat-paginator",22),t.NdJ("page",function(r){return n.pageChange(r)}),t.qZA()()()),2&e&&(t.Q6J("ngIf",n.showLoader),t.xp6(11),t.Q6J("dataSource",n.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("length",n.totalLength)("pageSizeOptions",t.DdM(6,pt)))},dependencies:[p.O5,p.PC,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,m.NW,y.Hw,h.Eo,C.gM,p.uU],styles:[".main_container[_ngcontent-%COMP%]{padding:0 10px}.btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;position:relative}.show_List[_ngcontent-%COMP%]{border:1px solid #CCCBCB;width:auto;border-radius:3px;background-color:#fff;color:#635d5d;font-weight:600;margin-left:0;height:36px;cursor:pointer;padding:10px}.show_List[_ngcontent-%COMP%]:hover{color:#1e88e5;border:1px solid #1e88e5}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.icon[_ngcontent-%COMP%]{margin-right:5px}"]}),i})()}];let mt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(ut),f.Bz]}),i})();var ht=l(6205);let gt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.ez,mt,s.p0,m.TU,ht.X,y.Ps,h.Js,C.AV,T.g0]}),i})()}}]);